
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.3">
    
    
      
        <title>外设设计 - 2021龙芯杯</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.f7f47774.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="2021龙芯杯" class="md-header__button md-logo" aria-label="2021龙芯杯" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            2021龙芯杯
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              外设设计
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="2021龙芯杯" class="md-nav__button md-logo" aria-label="2021龙芯杯" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    2021龙芯杯
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        首页
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../%E9%BE%99%E8%8A%AF%E6%9D%AF%E8%B5%84%E6%96%99%E6%B1%87%E6%80%BB/" class="md-nav__link">
        资料汇总
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../CPU%E8%AE%BE%E8%AE%A1/" class="md-nav__link">
        CPU设计
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Cache%E8%AE%BE%E8%AE%A1/" class="md-nav__link">
        Cache设计
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Soc%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1/" class="md-nav__link">
        Soc框架设计
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          外设设计
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        外设设计
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    外设部分设计
  </a>
  
    <nav class="md-nav" aria-label="外设部分设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1. 概述
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    2. 具体步骤
  </a>
  
    <nav class="md-nav" aria-label="2. 具体步骤">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-cpu" class="md-nav__link">
    2.1 封装cpu
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-soc" class="md-nav__link">
    2.2 重新设计Soc架构
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    2.3 定制外设
  </a>
  
    <nav class="md-nav" aria-label="2.3 定制外设">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231" class="md-nav__link">
    2.3.1 串口控制器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-usb" class="md-nav__link">
    2.3.2 USB控制器（难度较大）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233" class="md-nav__link">
    2.3.3 以太网控制器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234-flash" class="md-nav__link">
    2.3.4  Flash控制器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#235-lcdvga" class="md-nav__link">
    2.3.5 LCD控制器，VGA控制器（完全无思路，建议不实现）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#236-ps2" class="md-nav__link">
    2.3.6 PS/2控制器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#237-gpio" class="md-nav__link">
    2.3.7 GPIO控制器
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" class="md-nav__link">
    2.4 地址分配及中断连接
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3.参考资料
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        其它资料
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="其它资料" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          其它资料
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%B6%85%E6%A0%87%E9%87%8F%E5%A4%84%E7%90%86%E5%99%A8%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        《超标量处理器》笔记
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../materials/%E6%8C%87%E4%BB%A4%E9%9B%86/" class="md-nav__link">
        指令集
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../materials/%E6%94%AF%E6%8C%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E9%A2%9D%E5%A4%96%E6%8C%87%E4%BB%A4/" class="md-nav__link">
        支持操作系统的额外指令
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    外设部分设计
  </a>
  
    <nav class="md-nav" aria-label="外设部分设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1. 概述
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    2. 具体步骤
  </a>
  
    <nav class="md-nav" aria-label="2. 具体步骤">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-cpu" class="md-nav__link">
    2.1 封装cpu
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-soc" class="md-nav__link">
    2.2 重新设计Soc架构
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    2.3 定制外设
  </a>
  
    <nav class="md-nav" aria-label="2.3 定制外设">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231" class="md-nav__link">
    2.3.1 串口控制器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-usb" class="md-nav__link">
    2.3.2 USB控制器（难度较大）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233" class="md-nav__link">
    2.3.3 以太网控制器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234-flash" class="md-nav__link">
    2.3.4  Flash控制器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#235-lcdvga" class="md-nav__link">
    2.3.5 LCD控制器，VGA控制器（完全无思路，建议不实现）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#236-ps2" class="md-nav__link">
    2.3.6 PS/2控制器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#237-gpio" class="md-nav__link">
    2.3.7 GPIO控制器
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" class="md-nav__link">
    2.4 地址分配及中断连接
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3.参考资料
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>外设设计</h1>
                
                <h2 id="_1">外设部分设计<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<blockquote>
<p>2021/8/11</p>
<p>此文档是我们小组外设的具体设计</p>
</blockquote>
<h3 id="1">1. 概述<a class="headerlink" href="#1" title="Permanent link">&para;</a></h3>
<p>关于外设部分设计，实际涉及到整个Soc的架构、不同模块的封装以及多个IP核的调用。其中主要使用的功能为Vivado的IP INTEGRATOR中的Block Design（简称bd）功能，以实现近乎nocode的开发模式。</p>
<h3 id="2">2. 具体步骤<a class="headerlink" href="#2" title="Permanent link">&para;</a></h3>
<h4 id="21-cpu">2.1 封装cpu<a class="headerlink" href="#21-cpu" title="Permanent link">&para;</a></h4>
<p>​       首先需要将CPU与两个Cache整体封装为对外为AXI4 接口的一个IP核，</p>
<p>​       具体封装步骤见参考资料第一条视频相关内容（从第24min起为有用内容，53min起的gpioled模块写法可以跳过，直到1h07min之后是封装的具体操作，1h27min之后基本无重要内容）。</p>
<p>​       使用create block design，在tools中选择create and package new ip 选择需要封装的内容（packaging options，建议选择第三项，封装时注意，bd功能不支持将systemverilog文件封装，需要把cpu_top包装为verilog的.v文件），此时会打开新页面edit_ip，之后可以进行进一步封装（ILA封装可选）。在每次修改了IP核的源码之后需要更新Package IP中的更新选项。此时回到bd界面就可以右键add IP，之后可以愉快划线连接端口了[doge]😅。</p>
<p>​       需要给bd模块创建一个顶层文件，才可以进行后续相应的引脚绑定。右键.bd文件，选择Create HDL Wrapper，默认选择ok，之后创建约束文件（在Constraints/constrs目录下右键Add Sources，创建文件.xdc，如果不懂xdc语法，可以再PROJECT MANAGER 下的Language Template中预览XDC文件的一些约束写法，配置iopins），或者可以nocode贯彻到底，跑过综合之后open synthesized Design 点击I/O ports配置引脚约束连接其他模块（例如封装好的外设IP核或者AXI Interconnect模块等）。</p>
<h4 id="22-soc">2.2 重新设计Soc架构<a class="headerlink" href="#22-soc" title="Permanent link">&para;</a></h4>
<p>//TODO : 在封装好cpu之后考虑暴露的端口以及是否使用JTAG便于调试来重新修改cpu，JTAG，AXI Interconnect，Mems以及外设之间的连接方式，重新设计架构。</p>
<h4 id="23">2.3 定制外设<a class="headerlink" href="#23" title="Permanent link">&para;</a></h4>
<p>​       定制外设的重点任务在于对每个需要的外设配置一个controller以连接外设本身和整个Soc进行通信，在完成响应配置，封装为相应的IP核并添加，增加引脚配置之后，需要在block design界面的响应模块的连线处右键点击make external完成和外设真正的连接。</p>
<p>​       下面对于可以选配的外设进行介绍，建议根据难易程度进行选择性实现。</p>
<h5 id="231">2.3.1 串口控制器<a class="headerlink" href="#231" title="Permanent link">&para;</a></h5>
<p>​       板载串口为RS-232接口，已经实现基本的串口通信功能，但可以通过AXI UART 16550 IP实现标准的NS16550 UART控制器，以支持较为完整的串口协议。实现括可变波特率、流量控制 和读写缓冲区。</p>
<p>​       在软件使用串口前，需要首先对多个配置寄存器进行初始化，配置波特率、 中断等不同的属性，方可正常与 PC 进行通信。</p>
<p>​       串口控制器有一个中断，指示收到了数据， 清华设计中被直接连接到 CPU 的第一个硬件中断上。</p>
<h5 id="232-usb">2.3.2 USB控制器（难度较大）<a class="headerlink" href="#232-usb" title="Permanent link">&para;</a></h5>
<p>​       板载USB接口为Microchip USB 3500，提供的是UTMI+ Level3.0接口，仅实现了物理层的收发逻辑。至于具体控制器的设计还要根据后续的实际功能进行设计。</p>
<h5 id="233">2.3.3 以太网控制器<a class="headerlink" href="#233" title="Permanent link">&para;</a></h5>
<p>​       可以通过AXI Ethernet Lite IP实现该控制器。</p>
<h5 id="234-flash">2.3.4  Flash控制器<a class="headerlink" href="#234-flash" title="Permanent link">&para;</a></h5>
<p>​       板载两块SPI NOR Flash芯片，其中一块为CFG Flash，固化连接至FPGA配置专用硬件逻辑，另一片为SPI Flash，是可插拔普通SPI I/O引脚，均可通过AXI Quad SPI IP进行控制。</p>
<p>​       对于CFG Flash，主要作用为存储bitstream，此外还有余量，可以用来存储U-Boot和Linux Kernal的ELF格式文件用于系统启动，具体方式可以参考启动POMN时的串口下载方式。为方便使用，通过 IP 的 XIP（Execute In Place）特性，我们可以将它映射为一块只读的内存空间，从而加载U-Boot 也能加载 Linux 内核。</p>
<p>​       对于SPI Flash，可以实现为普通存储， XIP 的只读模式不能满足需求。我们将其暴露为一个标准的 SPI 控制器，由软件来进行相应的管理。需要能够实现对Flash的擦除、读取和写入等操作。同时为提高IO效率，需要实现中断。</p>
<h5 id="235-lcdvga">2.3.5 LCD控制器，VGA控制器（完全无思路，建议不实现）<a class="headerlink" href="#235-lcdvga" title="Permanent link">&para;</a></h5>
<h5 id="236-ps2">2.3.6 PS/2控制器<a class="headerlink" href="#236-ps2" title="Permanent link">&para;</a></h5>
<p>​       实验板载一个 PS/2 物理接口，可以用于连接较老的鼠标/键盘等设备。我们使用 Altera 提供的 University Program PS/2 IP 对其进行控制，在 Linux 中也有对应的驱动支持。由 于其为 APB 总线，同样需要 Bridge 进行转换；它的中断信号被直接连接到 CPU 的 3 号 中断引脚。</p>
<p>​       具体实现需要找到该IP核。或者参考https://blog.csdn.net/qimoDIY/article/details/99711354博文内容。</p>
<h5 id="237-gpio">2.3.7 GPIO控制器<a class="headerlink" href="#237-gpio" title="Permanent link">&para;</a></h5>
<p>​       龙芯提供了confreg模块，已经较好地实现了对GPIO引脚的控制，可以直接使用，但需要修改一些参数。</p>
<h4 id="24">2.4 地址分配及中断连接<a class="headerlink" href="#24" title="Permanent link">&para;</a></h4>
<p>​       处理地址映射可以通过vivado中window/address editor工具来实现，具体配置可参考下图。<img alt="image-20210812075715078" src="/Users/dongshilong/Library/Application Support/typora-user-images/image-20210812075715078.png" /> </p>
<p>​       中断处理具体参考清华NonTrivalMIPS报告3.1.3内容。</p>
<h3 id="3">3.参考资料<a class="headerlink" href="#3" title="Permanent link">&para;</a></h3>
<ol>
<li>https://www.bilibili.com/video/BV1u4411P7pL视频24min开始</li>
<li>清华大学NonTrivalMIPS资料及源代码</li>
<li>https://blog.csdn.net/qq_33231534/article/details/105364361系列博文</li>
</ol>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../Soc%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Soc框架设计" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Soc框架设计
            </div>
          </div>
        </a>
      
      
        
        <a href="../%E8%B6%85%E6%A0%87%E9%87%8F%E5%A4%84%E7%90%86%E5%99%A8%E7%AC%94%E8%AE%B0/" class="md-footer__link md-footer__link--next" aria-label="Next: 《超标量处理器》笔记" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              《超标量处理器》笔记
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.29db7785.min.js"></script>
      
    
  </body>
</html>